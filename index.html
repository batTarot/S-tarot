<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>타로 카드 뽑기</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="container">
        <h1>Title</h1>
        <button id="cardBtn" onclick="drawCard()">❤️</button>
        <img id="cardImage" src="" alt="타로 카드" style="display: none;">
        <div id="cardResult"></div>

        <div id="main-div"> 
            <button id="main-btn" onclick="showModal('notice')">❤️ 주의문</button>
        </div>
        <div id="main-div1"> 
            <button id="main-btn1" onclick="showModal('howToUse')">❤️ 사용 설명서</button>
        </div>
        <div id="main-div2"> 
            <button id="main-btn2" onclick="showModal('interesting')">❤️ 제작자 설명</button>
        </div>        
        <button id="backBtn" onclick="goBack()" style="display: none;">뒤로가기</button>
 
    </div>

    <!-- 모달 -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modal-title"></h2>
            <p id="modal-text"></p>
        </div>
    </div>
    <script src="./tarotData.js"></script>
    <script>
        // 모달 관련 요소들
        var modal = document.getElementById("modal");
        var modalTitle = document.getElementById("modal-title");
        var modalText = document.getElementById("modal-text");
        var span = document.getElementsByClassName("close")[0];

        // 모달 표시 함수
        function showModal(type) {
            if(type === 'notice') {
                modalTitle.textContent = "주의문";
                modalText.textContent = "본 프로그램은 성의 광범위한 조언을 주는 타로로, 어떤 방식으로든 성인 인증이 완료된 후원자만 사용 가능합니다. 후원자(사용자)가 성인임을 전제하며 미성년자 사용시 타인의 신분증 도용, 대리 인증을 실행하였음을 간주합니다. 모든 법적 책임 소지는 미성년 후원자(사용자)에게 있으며 제작자는 일절 책임지지 않음을 고지합니다.";
                
            } else if (type === 'howToUse') {
                modalTitle.textContent = "사용방법";
                modalText.textContent = "키스부터 애무, 유사 성행위, 삽입 성행위, 후희까지 잠자리에 관한 전반적인 조언이 필요할 때 사용합니다. 여성 친화적인 해설로, 카드를 뽑는 당사자가 남성일 시 정확도가 떨어질 수 있습니다. 데일리 운세가 아닌 만큼 오늘 특정 관계에서 잠자리 이슈 발생 유무가 궁금할 때는 적합하지 않습니다.";

            } else if (type === 'interesting') {
                modalTitle.textContent = "제작자 설명";
                modalText.textContent = "content none -> 추후 삽입 예정";
            }
            modal.style.display = "block";
        }

        // 모달 닫기
        span.onclick = function() {
            modal.style.display = "none";
        }

        // 모달 외부 클릭 시 닫기
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
        function drawCard() {
            var cardBtn = document.getElementById('cardBtn');
            var randomCard = tarotCards[Math.floor(Math.random() * tarotCards.length)];
            var resultDiv = document.getElementById('cardResult');
            var cardImage = document.getElementById('cardImage');
            var mainDiv = document.getElementById('main-div');
            var mainDiv1 = document.getElementById('main-div1');
            var mainDiv2 = document.getElementById('main-div2');
            var backBtn = document.getElementById('backBtn');
            
            cardBtn.style.display = 'none';
            mainDiv.style.display = 'none';
            mainDiv1.style.display = 'none';
            mainDiv2.style.display = 'none';
            backBtn.style.display = 'block';

            resultDiv.innerHTML = '<h2>' + randomCard.name + '</h2><p>' + randomCard.meaning + '</p>';
            cardImage.src = randomCard.image;
            cardImage.style.display = 'block';
        }

        function goBack() {
            var cardBtn = document.getElementById('cardBtn');
            var resultDiv = document.getElementById('cardResult');
            var cardImage = document.getElementById('cardImage');
            var mainDiv = document.getElementById('main-div');
            var mainDiv1 = document.getElementById('main-div1');
            var mainDiv2 = document.getElementById('main-div2');
            var backBtn = document.getElementById('backBtn');
            
            cardBtn.style.display = 'block';
            mainDiv.style.display = 'block';
            mainDiv1.style.display = 'block';
            mainDiv2.style.display = 'block';
            backBtn.style.display = 'none';

            resultDiv.innerHTML = '';
            cardImage.style.display = 'none';
            cardImage.src = '';
        }
    </script>
</body>
</html>